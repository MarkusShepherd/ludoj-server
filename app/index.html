<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	lang="en"
	xml:lang="en"
	ng-app="ludojApp">
<head>
	<title>Ludoj</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta http-equiv="Content-Security-Policy"
		content="default-src *; style-src * 'self' 'unsafe-inline'; script-src * 'self' 'unsafe-inline' 'unsafe-eval'; media-src *; img-src * 'self' data:; font-src * data:;" />

	<link rel="stylesheet"
		href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
		integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
		crossorigin="anonymous" />
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/angular-block-ui/0.2.2/angular-block-ui.min.css" />
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.6.0/rzslider.min.css" />
	<link rel="stylesheet"
		href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
		integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
		crossorigin="anonymous" />
	<link rel="stylesheet" href="app.css" />

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		type="text/javascript"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		type="text/javascript"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
		type="text/javascript"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"
		type="text/javascript"
		integrity="sha256-7/yoZS3548fXSRXqc/xYzjsmuW3sFKzuvOCHd06Pmps="
		crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.5/angular.min.js"
		type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-block-ui/0.2.2/angular-block-ui.min.js"
		type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.6.0/rzslider.min.js"
		type="text/javascript"></script>
	<script src="app.js" type="text/javascript"></script>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
	<link rel="manifest" href="/site.webmanifest" />
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
	<meta name="msapplication-TileColor" content="#da532c" />
	<meta name="theme-color" content="#ffffff" />
</head>

<body ng-controller="GamesController">
	<div class="container">
		<h1 class="display-1">Ludoj</h1>
		<p class="lead">
			Top-rated games as evaluated by our <a href="https://gitlab.com/mshepherd/ludoj-recommender" target="_blank">recommendation engine</a>.
		</p>

		<form ng-submit="fetchGames(1, false, user)"
				id="fetch-game-form"
				name="fetch-game-form"
				novalidate="novalidate"
				role="form"
				class="form">
			<label for="user"
					id="bgg-user-label"
					class="{{ user ? 'text-success' : 'text-muted' }}">
				Personal recommendations for:
			</label>
			<div class="input-group mb-3">
				<input type="text"
					id="user"
					name="user"
					ng-model="user"
					ng-required="true"
					class="form-control"
					placeholder="BoardGameGeek user name"
					aria-describedby="bgg-user-label" />
				<div class="input-group-append">
					<button type="submit"
							ng-disabled="!user"
							class="btn btn-primary">
						GO!
					</button>
				</div>
			</div>
		</form>

		<form ng-submit="fetchGames(1, false, user)"
				id="search-game-form"
				name="search-game-form"
				novalidate="novalidate"
				role="form"
				class="form">
			<div class="form-row">
				<div class="col-md-9 col-sm-8 mb-3">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<label for="search"
										id="search-label"
										class="form-check-label {{ search ? 'text-success' : 'text-muted' }}">
									Game name:
								</label>
							</div>
						</div>
						<input type="text"
							id="search"
							name="search"
							ng-model="search"
							ng-required="true"
							class="form-control"
							placeholder="e.g., &quot;catan&quot;"
							aria-describedby="search-label" />
						<div class="input-group-append">
							<button type="submit"
									ng-disabled="!search"
									class="btn btn-primary">
								Search
							</button>
						</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-4 mb-3 text-right">
					<button type="button"
							class="btn btn-outline-primary btn-sm"
							ng-click="renderSlider()"
							data-toggle="collapse"
							data-target="#filter-game-form"
							aria-expanded="false"
							aria-controls="filter-game-form">
						Advanced filters:
					</button>
				</div>
			</div>
		</form>

		<form ng-submit="fetchGames(1, false, user)"
				id="filter-game-form"
				name="filter-game-form"
				novalidate="novalidate"
				role="form"
				class="collapse form">
			<div class="form-row mb-3">
				<div class="col-xl-4 col-lg-5 col-md-6">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<input type="checkbox"
									class="form-check"
									id="filter-count-enable"
									name="filter-count-enable"
									ng-model="count.enabled" />
							</div>
							<div class="input-group-text">
								<label for="filter-count"
										class="form-check-label {{ count.enabled ? 'text-success' : 'text-muted' }}">
									Player count:
									<strong class="text-monospace {{ count.enabled ? '' : 'invisible' }}">
										{{ pad(count.value, 2, '&nbsp;') }}
									</strong>
								</label>
							</div>
						</div>
						<select name="filter-count-type"
								ng-disabled="!count.enabled"
								ng-model="count.type"
								class="custom-select"
								id="filter-count-type">
							<option selected="selected">box</option>
							<option>recommended</option>
							<option>best</option>
						</select>
					</div>
				</div>
				<div class="col-xl-8 col-lg-7 col-md-6">
					<rzslider id="filter-count"
						name="filter-count"
						ng-disabled="!count.enabled"
						rz-slider-model="count.value"
						rz-slider-options="count.options"></rzslider>
				</div>
			</div>

			<div class="form-row mb-3">
				<div class="col-xl-4 col-lg-5 col-md-6">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<input type="checkbox"
									class="form-check"
									id="filter-time-enable"
									name="filter-time-enable"
									ng-model="time.enabled" />
							</div>
							<div class="input-group-text">
								<label for="filter-time"
										class="form-check-label {{ time.enabled ? 'text-success' : 'text-muted' }}">
									Play time:
									<span class="{{ time.enabled ? '' : 'invisible' }}">
										<strong class="text-monospace">{{ pad(time.value, 3, '&nbsp;') }}</strong> minutes
									</span>
								</label>
							</div>
						</div>
						<select name="filter-time-type"
								ng-disabled="!time.enabled"
								ng-model="time.type"
								class="custom-select"
								id="filter-time-type">
							<option selected="selected">min</option>
							<option>max</option>
						</select>
					</div>
				</div>
				<div class="col-xl-8 col-lg-7 col-md-6">
					<rzslider id="filter-time"
						name="filter-time"
						ng-disabled="!time.enabled"
						rz-slider-model="time.value"
						rz-slider-options="time.options"></rzslider>
				</div>
			</div>

			<div class="form-row mb-3">
				<div class="col-xl-4 col-lg-5 col-md-6">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<input type="checkbox"
									class="form-check"
									id="filter-age-enable"
									name="filter-age-enable"
									ng-model="age.enabled" />
							</div>
							<div class="input-group-text">
								<label for="filter-age"
										class="form-check-label {{ age.enabled ? 'text-success' : 'text-muted' }}">
									Player age:
									<span class="{{ age.enabled ? '' : 'invisible' }}">
										<strong class="text-monospace">{{ pad(age.value, 2, '&nbsp;') }}</strong> years
									</span>
								</label>
							</div>
						</div>
						<select name="filter-age-type"
								ng-disabled="!age.enabled"
								ng-model="age.type"
								class="custom-select"
								id="filter-age-type">
							<option selected="selected">box</option>
							<option>recommended</option>
						</select>
					</div>
				</div>
				<div class="col-xl-8 col-lg-7 col-md-6">
					<rzslider id="filter-age"
						name="filter-age"
						ng-disabled="!age.enabled"
						rz-slider-model="age.value"
						rz-slider-options="age.options"></rzslider>
				</div>
			</div>

			<div class="form-row mb-3">
				<div class="col-xl-4 col-lg-5 col-md-6">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<input type="checkbox"
									class="form-check"
									id="filter-complexity-enable"
									name="filter-complexity-enable"
									ng-model="complexity.enabled" />
							</div>
						</div>
						<div class="input-group-append">
							<div class="input-group-text">
								<label for="filter-complexity"
										class="form-check-label {{ complexity.enabled ? 'text-success' : 'text-muted' }}">
									Complexity:
									<strong class="text-monospace {{ complexity.enabled ? '' : 'invisible' }}">
										{{ complexity.min | number:1 }}&mdash;{{ complexity.max | number:1 }}
									</strong>
								</label>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-8 col-lg-7 col-md-6">
					<rzslider id="filter-complexity"
						name="filter-complexity"
						ng-disabled="!complexity.enabled"
						rz-slider-model="complexity.min"
						rz-slider-high="complexity.max"
						rz-slider-options="complexity.options"></rzslider>
				</div>
			</div>

			<div class="form-row mb-3">
				<div class="col-xl-4 col-lg-5 col-md-6">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<input type="checkbox"
									class="form-check"
									id="filter-year-enable"
									name="filter-year-enable"
									ng-model="year.enabled" />
							</div>
						</div>
						<div class="input-group-append">
							<div class="input-group-text">
								<label for="filter-year"
										class="form-check-label {{ year.enabled ? 'text-success' : 'text-muted' }}">
									Year:
									<span class="{{ year.enabled ? '' : 'invisible' }}">
										<strong class="text-monospace">{{ year.min == year.options.floor ? '&le;' : '&nbsp;' }}{{ year.min }}</strong>
										to
										<strong class="text-monospace">{{ year.max == year.options.ceil ? '&ge;' : '&nbsp;' }}{{ year.max }}</strong>
									</span>
								</label>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-8 col-lg-7 col-md-6">
					<rzslider id="filter-year"
						name="filter-year"
						ng-disabled="!year.enabled"
						rz-slider-model="year.min"
						rz-slider-high="year.max"
						rz-slider-options="year.options"></rzslider>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-6 mb-3">
					<div class="input-group">
						<div class="input-group-prepend">
							<div class="input-group-text">
								<label for="filter-cooperative"
										class="form-check-label {{ cooperative ? 'text-success' : 'text-muted' }}">
									Cooperative:
								</label>
							</div>
						</div>
						<select name="filter-cooperative"
								ng-model="cooperative"
								class="custom-select"
								id="filter-cooperative">
							<option selected="selected" ng-value="null">[all]</option>
							<option value="True">only cooperative</option>
							<option value="False">only competitive</option>
						</select>
					</div>
				</div>
				<div class="col-md-3 col-6 mb-3">
					<button type="button"
							ng-click="clearFilters()"
							class="btn btn-outline-secondary btn-block">
						Clear
					</button>
				</div>
				<div class="col-md-3 col-6 mb-3">
					<button type="submit"
							class="btn btn-primary btn-block">
						Filter
					</button>
				</div>
			</div>
		</form>

		<h2 ng-if="currUser">
			Recommended games for <strong>
				<a ng-href="https://boardgamegeek.com/user/{{ currUser }}" target="_blank">{{ currUser }}</a>
			</strong>
		</h2>
		<p ng-if="currUser">
			See recommendations <a href="#" ng-click="fetchGames(1, false, null)">for all users</a> instead
		</p>

		<div class="row">
			<div ng-repeat="game in games"
					ng-click="open(game.url)"
					class="col-lg-3 col-md-4 col-sm-6">
				<div class="game"
						ng-style="bgImage(game.image_url)">
					<div>
						<span ng-if="game.rec_rank"
								class="game-rank badge badge-pill badge-success">
							#{{ game.rec_rank }}
						</span>
						<h2 class="game-title">
							{{ game.name }}
							<small ng-if="game.year"
									class="text-muted">
								({{ game.year }})
							</small>
							<span ng-if="game.rec_rating"
									class="game-score badge badge-info">
								{{ game.rec_rating | number:1 }}
							</span>
						</h2>
					</div>
				</div>
			</div>
			<div ng-if="nextPage"
					ng-click="fetchGames(nextPage, true, currUser)"
					class="col-lg-3 col-md-4 col-sm-6">
				<div class="game game-more">
					<div>
						<h2 class="game-title">More...</h2>
					</div>
				</div>
			</div>
		</div>

	</div>

	<footer class="navbar navbar-expand navbar-dark bg-dark">
		<div class="container">
			<ul class="nav navbar-nav">
				<li class="nav-item">
					<a class="nav-link"
							href="http://www.riemannhypothesis.info/"
							target="_blank">
						Markus Shepherd &copy; {{ yearNow }}
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link"
							href="https://twitter.com/MarkusRShepherd"
							target="_blank">
						<i class="fab fa-twitter"></i>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link"
							href="https://github.com/MarkusShepherd"
							target="_blank">
						<i class="fab fa-github"></i>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link"
							href="https://gitlab.com/mshepherd"
							target="_blank">
						<i class="fab fa-gitlab"></i>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link"
							href="https://uk.linkedin.com/in/markusschepke"
							target="_blank">
						<i class="fab fa-linkedin-in"></i>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link"
							href="https://www.youtube.com/user/MarkusSchepke"
							target="_blank">
						<i class="fab fa-youtube"></i>
					</a>
				</li>
			</ul>
		</div>
	</footer>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async="async"
		src="https://www.googletagmanager.com/gtag/js?id=UA-128891980-1"
		type="text/javascript"></script>
	<script type="text/javascript">
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}

		gtag('js', new Date());
		gtag('config', 'UA-128891980-1');
	</script>
</body>

</html>
